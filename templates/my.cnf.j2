# Managed by Ansible - DO NOT EDIT MANUALLY

[mysqld]
# Basic settings
datadir={{ mysql_data_dir | default('/var/lib/mysql') }}
socket=/var/run/mysqld/mysqld.sock

# Network
bind-address = {{ mysql_bind_address | default('127.0.0.1') }}
port = {{ mysql_port | default(3306) }}

# Performance
max_connections = {{ mysql_max_connections | default(151) }}
key_buffer_size = {{ mysql_key_buffer_size | default('16M') }}
max_allowed_packet = {{ mysql_max_allowed_packet | default('16M') }}

# InnoDB settings
innodb_buffer_pool_size = {{ mysql_innodb_buffer_pool_size | default('128M') }}
innodb_log_file_size = {{ mysql_innodb_log_file_size | default('48M') }}
innodb_flush_log_at_trx_commit = {{ mysql_innodb_flush_log_at_trx_commit | default(1) }}

# Logging
log_error = /var/log/mysql/error.log
slow_query_log = {{ '1' if mysql_slow_query_log | default(true) else '0' }}
slow_query_log_file = /var/log/mysql/mysql-slow.log
long_query_time = {{ mysql_long_query_time | default(2) }}

[mysql]
default-character-set = utf8mb4

[client]
port = {{ mysql_port | default(3306) }}
socket = /var/run/mysqld/mysqld.sock